<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Create Report - BART</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no"
    />
    <meta name="description" content="Great Tool to track test results" />
    <link rel="stylesheet" type="text/css" href="./CSS/acrt_styles.css" />
    <script src="JS/AngularJS1.6.9/angular.js"></script>
    <script src="JS/FileSaver.js"></script>
  </head>

  <body ng-app="acrtWebIntake" id="acrtBody">
    <form name="acrtInputForm" id="acrtInputFormID">
      <div ng-controller="acrtWebIntakeCtrl">
        <a href="#helpID" id="skipID" class="skip" autofocus
          >Skip to Main Content
        </a>
        <div>
          <img
            hidden
            src="./Resources/acrt-logo-lrg.png"
            alt="ACRT logo"
            title="ACRT Logo"
            style="width: 10em; margin-bottom: -7px"
          />
          <h1>Baseline Alignment Reporting Tool (BART)</h1>
        </div>
        <div class="topnav" id="myTopnav">
          <a title="Home" href="./index.html" id="homeID" class="menu">Home </a>
          <!--target="_blank"  -->
          <a
            title="Instructions"
            href="./Instruction.html"
            class="menu"
            id="defaultFocus"
            >Instructions
          </a>
          <a
            title="Create Report"
            href="./ACRT_Web_Input_Form.html"
            id="crtReportID"
            class="menu"
            >Create Report</a
          >
          <a
            title="View Report"
            href="./ACRT_View_webReport.html"
            id="vwRptId"
            class="menu"
            >View Report</a
          >
          <a
            title="View License"
            href="./LICENSE.html"
            id="licenseID"
            class="menu"
          >
            View License
          </a>
        </div>

        <div id="helpID">
          <h2>Create Report</h2>
          <!--
  To make sure you have the latest version of ACRT, check either 
  <a title="ACRT GitHub Repository" href= "https://github.com/Section508Coordinators/ACRT " target="_blank"   id="helpID"> GitHub </a>  &nbsp;(all users) 
  or <a title="ACRT Bitbucket Repository" href= "https://maestro.dhs.gov/stash/projects/APPDEV/repos/acrt/browse/acrt" target="_blank"   id="bitbucketSrc">BitBucket </a>  &nbsp;(DHS users) before completing the form. <br><br>
  <p>Refer to the <a title="ACRT User Guide" href="./Resources/ACRTTrainingManual.pdf" target="_blank"  id="helpID" style="display:inline-block; color:blue;">ACRT User Guide </a> &nbsp;for complete instructions.</p> -->
          <h3>Developer Updates/Notes</h3>
          <ul>
            <li>
              Form data updates: Product changed to Process, Tester changed to
              Submitter.
            </li>
            <li>
              An overall alignment result is determined when the JSON file is
              saved.
            </li>
            <li>Sample files and instructions updated.</li>
            <li>
              Quote marks allowed in Test Case Description and Tester Comments
            </li>
          </ul>

          <h3>BART App Instructions:</h3>
          <ol>
            <li>
              Use 'Skip to main content' link or keyboard shortcut Alt+M to go
              to main content.
            </li>
            <li>
              Use 'Choose File' to select a JSON file from the Resources folder.
              <strong>BaselineTestCasesPilot_e.json</strong> is a sample starter
              file (no user form fields completed). Please save edits to a new
              filename.
            </li>
            <!-- KE: FIXED!
        <ul>        	
          <li>Notes for Baseline JSON file: expand "dna" to "does not apply" (for alignment comparison)</li>
          <li>Notes for Baseline JSON file: remove quote marks from Test Case Description (to avoid JSON write errors).</li>
        </ul> -->
            <li>
              Sample JSONs with test results are also available in the Resources
              folder:
              <ul>
                <li>
                  The 'BAT Process3.3_aligned.json' has all of the test process
                  results align with all Baseline Expected Results (no test
                  process IDs Entered).
                </li>
                <li>
                  The 'BAT Process3.3_notaligned_testids.json' has some test
                  process results that do not align with Baseline Expected
                  Results (with test process IDs Entered).
                </li>
              </ul>
            </li>
          </ol>
          <span id="selectFileHd" ng-hide="fileInput1">
            <label for="fileinput">
              <strong> Select template or test results JSON file </strong>
            </label>

            <br />

            <input
              type="file"
              class="input"
              id="fileinput"
              name="Browse Input File"
              title="Please select valid file"
              ng-model="selectedFile"
              onchange="angular.element(this).scope().fileNameChanged(this)"
              accept=".json"
            />

            <br />

            <!--ng-click ="fileInput();"-->
          </span>

          <br />

          <strong><span id="selMsg" ng-show="fileInput1"> </span></strong>

          <br />

          <br />

          <span id="hideLoad">
            <label for="loadFile" ng-show="fileInput1">
              <strong> Load file</strong>
            </label>

            <br />

            <button
              ng-show="fileInput1"
              class="button"
              ng-model="loadbtn"
              ng-click="loadFile();"
              id="loadFile"
              name="Load Data In this Form"
              ng-model-options="{  updateOn: 'click',  debounce: { 'default': 20, 'blur': 0 }}"
            >
              Load File
            </button>
          </span>
          <p>
            <img
              ng-show="fileInput1"
              id="dwnldConfm"
              ng-src="./Resources/chkMrk.jpg"
              ng-if="dataLoaded"
              width="20"
              height="20"
              alt="checkmark"
              onerror="this.style.display='none';"
            />
            <span id="msg"><strong></strong></span>
          </p>
        </div>

        <main style="margin-left: 1em">
          <div id="webAppIntakeform" name="Intake form to capture test results">
            <br />

            <div id="hdnMsgId">
              <!-- <p ng-if="edit">
	 <strong  class="hdnMsg">Please edit/update as needed below. </strong>
	 </p> -->
              <p ng-show="original">
                <!--<strong class="hdnMsg"> Please fill all required fields to save information from this page. </strong> -->
                <strong>
                  Please fill all required fields to save information from this
                  page.
                </strong>

                <br />

                A red asterisk
                <strong>(<span class="required">)</span></strong> indicates a
                <strong>required</strong> field.
              </p>
            </div>

            <!-- <p>  <strong> Note: </strong> <br> -->
            <!-- <ul>       
  <li> Expand each section below to enter required information.</li>
 </ul>  </p> -->

            <!-- KE: BART edits -->
            <div ng-show="displayIt">
              <fieldset style="margin-left: 1em; height: auto">
                <legend>
                  <h2><span class="required"> Test Process</span></h2>
                </legend>
                <button
                  class="collapsible"
                  title="Show or Hide Test Process Section"
                  onclick="expandCollapse1()"
                >
                  <div id="expandCollapse1">
                    <i class="up"></i> Show Test Process Section
                  </div>
                </button>
                <div class="content">
                  <div class="divSpace" id="productInfo">
                    <label for="productID" class="required">
                      Process Name (Required<span
                        ng-if="acrtInputForm.productName.$valid"
                        >, 50 chars max</span
                      >):
                    </label>

                    <br />

                    <input
                      type="string"
                      name="productName"
                      title="50 Chars max"
                      ng-model="productID"
                      class="betnTags"
                      id="productID"
                      ng-maxlength="50"
                      size="50"
                      limit-to="50"
                    />

                    <br />

                    <label for="versionID" class="required">
                      Process Version (Required<span
                        ng-if="acrtInputForm.ProductVersion.$valid"
                        >, 50 chars max</span
                      >):
                    </label>

                    <br />
                    <input
                      type="string"
                      ng-model="versionID"
                      class="betnTags"
                      id="versionID"
                      name="ProductVersion"
                      title="50 Char max"
                      ng-maxlength="50"
                      size="50"
                      limit-to="50"
                    />
                    <!-- <br> <label for="ownerID">Process Owner/Vendor <span ng-if="acrtInputForm.ProductOwner.$valid" >(50 chars max)</span>: </label> <br><input type="string" ng-model="ownerID" class= "betnTags" id="ownerID" name="ProductOwner" title="50 Chars max" ng-maxlength="50" size="50" limit-to="50" > -->

                    <br />

                    <label for="productType"> Process Type:</label>
                    <br />

                    <select
                      name="Type of Process"
                      title="Process type {{default_productType}}"
                      ng-model="productType"
                      class="betnTags"
                      id="productType"
                    >
                      <option value="">{{default_productType}}</option>
                      <option
                        ng-repeat="result in testProductTypes"
                        value="{{result.name}}"
                      >
                        {{result.name}}
                      </option>
                    </select>

                    <span ng-show="productType=='Other'">
                      Please enter
                      <span ng-if="acrtInputForm.OtherProductType.$valid"
                        >(100 chars max)</span
                      >
                      <br />
                      <input
                        type="string"
                        ng-model="otherProduct"
                        class="betnTags"
                        id="otherProduct"
                        name="OtherProductType"
                        ng-maxlength="100"
                        title="100 Chars max"
                        size="100"
                        limit-to="100"
                      />
                    </span>

                    <br />
                    <label for="urlID"
                      >Test Process URL (if public)
                      <span ng-if="acrtInputForm.Location.$valid"
                        >(150 chars max)</span
                      >:
                    </label>

                    <br />
                    <input
                      type="string"
                      ng-model="urlID"
                      class="betnTags"
                      id="urlID"
                      name="Location"
                      title="150 Chars max"
                      ng-maxlength="150"
                      size="100"
                      limit-to="150"
                    />

                    <br />

                    <label for="prodDescID" class="required">
                      Process description (Required
                      <span ng-if="acrtInputForm.ProductDescription.$valid"
                        >, 1000 chars max</span
                      >) :
                    </label>
                    <br />

                    <textarea
                      rows="4"
                      cols="90"
                      type="text"
                      ng-model="prodDescID"
                      class="betnTags"
                      id="prodDescID"
                      name="ProductDescription"
                      title="1000 Chars max"
                      ng-maxlength="1000"
                      limit-to="1000"
                      required
                    >
This is test data from Kathy. </textarea
                    >

                    <br />
                    <label for="prdNteDescID">
                      Notes
                      <span ng-if="acrtInputForm.Notes.$valid"
                        >(1000 chars max)</span
                      >:</label
                    >
                    <br />

                    <textarea
                      rows="4"
                      cols="90"
                      type="text"
                      ng-model="prdNteDescID"
                      class="betnTags"
                      id="prdNteDescID"
                      name="Notes"
                      title="1000 Chars max"
                      ng-maxlength="1000"
                      limit-to="1000"
                    >
                    </textarea>

                    <br />
                  </div>
                </div>
              </fieldset>

              <br />

              <fieldset style="margin-left: 1em">
                <legend>
                  <h2><span class="required"> Submitter Information</span></h2>
                </legend>
                <button
                  class="collapsible"
                  title="Show or Hide Submitter section"
                  onclick="expandCollapse3()"
                >
                  <div id="expandCollapse3">
                    <i class="up"></i> Show Submitter Section
                  </div>
                </button>
                <div class="content">
                  <div class="divSpace" id="testersInfo">
                    <label for="CompanyName" class="required">
                      Agency Full Name (Required<span
                        ng-if="acrtInputForm.CompanyName.$valid"
                        >, 100 chars max</span
                      >):
                    </label>

                    <br />
                    <input
                      type="string"
                      ng-model="companyname"
                      class="betnTags"
                      title="100 Chars max"
                      id="companyname"
                      name="CompanyName"
                      ng-maxlength="100"
                      size="100"
                      limit-to="100"
                    />

                    <br />
                    <label for="firstname" class="required">
                      Submitter's First Name (Required<span
                        ng-if="acrtInputForm.TesterFirstName.$valid"
                        >, 50 chars max</span
                      >):
                    </label>

                    <br />
                    <input
                      type="string"
                      ng-model="firstname"
                      class="betnTags"
                      id="firstname"
                      name="TesterFirstName"
                      title="50 Chars max"
                      ng-maxlength="50"
                      size="50"
                      limit-to="50"
                    />

                    <br />
                    <label for="lastname" class="required">
                      Submitter's Last Name (Required<span
                        ng-if="acrtInputForm.TesterLastName.$valid"
                        >, 50 chars max</span
                      >):
                    </label>

                    <br />
                    <input
                      type="string"
                      ng-model="lastname"
                      class="betnTags"
                      id="lastname"
                      name="TesterLastName"
                      title="50 Chars max"
                      ng-maxlength="50"
                      size="50"
                      limit-to="50"
                    />

                    <br />
                    <label for="testerID">
                      Submitter's Title
                      <span ng-if="acrtInputForm.TrustedTesterId.$valid"
                        >(100 chars max)</span
                      >:
                    </label>

                    <br />
                    <input
                      type="string"
                      ng-model="testerID"
                      class="betnTags"
                      id="testerID"
                      name="TrustedTesterId"
                      title="100 Chars max"
                      ng-maxlength="100"
                      size="100"
                      limit-to="100"
                    />

                    <br />

                    <label for="testerContact" class="required">
                      Submitter's Email (Required<span
                        ng-if="acrtInputForm.TesterContact.$valid"
                        >, 50 chars max</span
                      >):
                    </label>

                    <br />
                    <input
                      type="string"
                      ng-model="testerContact"
                      class="betnTags"
                      id="testerContact"
                      name="TesterContact"
                      title="50 Chars max"
                      ng-maxlength="50"
                      size="50"
                      limit-to="50"
                    />

                    <br />
                    <label for="testScope">
                      All alignment results will be shared publicly on
                      Section508.gov. Please describe any concerns.
                      <span ng-if="acrtInputForm.TestScope.$valid"
                        >(1000 chars max)</span
                      >:</label
                    >
                    <br />

                    <textarea
                      rows="4"
                      cols="90"
                      type="text"
                      ng-model="testScope"
                      class="betnTags"
                      id="testScope"
                      name="TestScope"
                      title="1000 Chars max"
                      ng-maxlength="1000"
                      limit-to="1000"
                    />
                  </div>
                </div>
              </fieldset>

              <br />

              <!-- KE: BART table -->
              <h2>Baseline Alignment Test Results Form</h2>

              <div id="rmdTbleDiv" style="overflow-x: auto">
                <table id="rmdTble">
                  <caption id="tableCaption">
                    Follow the test process to determine results for each
                    Baseline Test Case and enter results in this table.
                    <!-- <span class="visuallyhidden">This table has information tester's need to select test results. Make sure to select or fill all required fields </span> -->
                  </caption>

                  <thead>
                    <tr>
                      <th scope="col">
                        <div class="widetd1">Item</div>
                      </th>
                      <th scope="col" nowrap>
                        <div class="widetd3">Test Case ID</div>
                      </th>
                      <th scope="col" nowrap>
                        <div class="widetd3">Test Case Description</div>
                      </th>
                      <th scope="col" nowrap>
                        <div class="widetd3">Test File</div>
                      </th>
                      <th scope="col">
                        <div class="widetd3">Expected Test Result</div>
                      </th>
                      <th scope="col" nowrap>
                        <div class="widetd3">Test Process's Result</div>
                      </th>
                      <th scope="col" nowrap>
                        <div class="widetd8">Test Process's Test Name/ID</div>
                      </th>
                      <th scope="col" nowrap>
                        <div class="widetd8">Tester Comments</div>
                      </th>
                    </tr>
                  </thead>

                  <tbody ng-repeat="record in jsonData">
                    <tr ng-repeat="test in record.Criteria">
                      <th scope="row">
                        <div class="widetd1">{{$index+1}}</div>
                        <!-- ng-if='original' -->
                      </th>
                      <td>
                        <div
                          class="widetd3"
                          id="testID{{$index}}"
                          title="Test ID"
                          nowrap
                        >
                          <a href="{{test.TestCaseURL}}" target="testcase"
                            >{{test.TestID}}</a
                          >
                        </div>
                      </td>
                      <td>
                        <div class="widetd3" id="testcondition{{$index}}">
                          {{test.TestName}}
                        </div>
                      </td>
                      <td>
                        <div class="widetd3">
                          <a href="{{test.TestFileURL}}" target="testfile"
                            >{{test.TestFile}}</a
                          >
                        </div>
                      </td>
                      <td nowrap>
                        <div class="widetd3">{{test.ExpectedResult}}</div>
                      </td>
                      <td name="Test Process Result">
                        <div class="widetd3">
                          <!-- This is the default for the BART results, options are in acrt_Web_Intake.js  -->
                          <span ng-keypress="elemntClicked2([$index])">
                            <select
                              class="resultOptions"
                              ng-model="selected_name_tstgrp[$index]"
                              ng-options="o.id as o.name for o in optionsTstrslt6"
                              ng-change="selected_name_tstgrp[$index]=(optionsTstrslt6|filter:{id:selected_id_tstrslt$index})[0].name"
                              id="{{$index}}"
                              ng-click="elemntClicked2([$index])"
                              title="Test Process Result for {{test.TestID}}"
                            >
                              <option value="" selected disabled hidden>
                                {{default_SelectedResult[$index]}}
                              </option>
                            </select>
                          </span>
                        </div>
                      </td>
                      <td name="Test Process Check ID">
                        <div class="widetd8">
                          <textarea
                            rows="1"
                            cols="35"
                            type="text"
                            ng-model="testProcessID[$index]"
                            class="txtarea1"
                            ng-maxlength="100"
                            title="Test Process Check ID"
                            limit-to="100"
                          >
{{test.TestProcess}}</textarea
                          >
                        </div>
                      </td>
                      <td>
                        <div class="widetd8">
                          <textarea
                            rows="4"
                            cols="35"
                            type="text"
                            ng-model="testerCommentID[$index]"
                            class="txtarea"
                            ng-maxlength="1000"
                            title="Tester's Comment, 1000 chars max"
                            limit-to="1000"
                          >
{{test.TesterComment}} </textarea
                          >
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <!-- END RESULTS TABLE (338-762) -->

              <br />

              <div />
              <div />

              <br />

              <br />

              <div class="footerbutton" ng-if="dataLoaded">
                <span> {{submitMessage}}</span>
                <br />

                <input
                  type="button"
                  id="sbtBtn"
                  class="button"
                  value="Save (Alt+S)"
                  ng-click="submit1()"
                />
              </div>
            </div>
          </div>
        </main>

        <div ng-switch="myMbTestResult">
          <div ng-switch-when="nottested">testResult</div>
          <div ng-switch-when="nottested">testResult</div>
          <div ng-switch-when="nottested">testResult</div>
          <div ng-switch-when="nottested">testResult</div>
        </div>
      </div>
    </form>

    <script src="./JS/common.js"></script>
    <script src="./JS/acrt_Web_Intake.js"></script>
  </body>
</html>
